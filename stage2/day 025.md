# Game Engine Architecture

## The Resource Manager

### Runtime Resource management

8. Composite Resources and Referential Integrity

   一般情况下，游戏资源数据库通常由大量的资源文件组成，每个资源文件包含一个或多个数据对象。这些对象能够以任意方式互相引用和依赖。游戏的资源数据库可以用一个有向图来表示，有向图的边表示资源引用。数据对象之间的交叉引用可以是内部的（单个资源文件中的不同对象），也可以是外部的（不同资源文件中的不同对象）。

   <img src="C:\Users\Clan\OneDrive\桌面\study\研二\day by day\pictures\image-20221026105957597.png" alt="image-20221026105957597" style="zoom:80%;" />

9. Handling Cross-References between Resources

   资源管理器的一个主要任务就是管理资源对象之间的交叉引用，并保证引用的完整性。C++中一般用指针或者引用来实现交叉引用，比如一个`Mesh`对象可能拥有数据成员`Material* m_pMaterial`。但指针表示的是内存地址，当数据在硬盘中时，指针毫无意义。

   ***GUIDs as Cross-References***

   一种方法是将每个交叉引用以GUID的方式存储，这意味着所有可能被引用的资源对象都必须有一个GUID。每个资源对象可以保存一个GUID数组，表示它所引用的资源。当所需资源都加载到内存以后，更新每个引用对象的指针。
   
   