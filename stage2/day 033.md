# Game Engine Architecture

## Foundations of Depth-Buffered Triangle Rasterization

### Lighting Basics

1. Local and Global Illumination Models

   只考虑直接光照的模型称为局部光照模型，此模型中，光发射后，碰到场景中某个物体后会反射，然后直接进入虚拟摄像机的虚拟平面。全局光照需要同时考虑直接光照和间接光照，实际上就是在解渲染方程。

2. The Phong Lighting Model

   Phong模型是最常用的局部光照模型，Phong模型的输入包括：

   - 视线方向$\mathbf{V}=[\mathbf{V}_x,\mathbf{V}_y,\mathbf{V}_z]$，是从反射点延伸至相机焦点的方向
   - 环境光强度$\mathbf{A}=[\mathbf{A}_R,\mathbf{A}_G, \mathbf{A}_B]$
   - 反射点所在的表面法线$\mathbf{N}=[\mathbf{N}_x,\mathbf{N}_y,\mathbf{N}_z]$
   - 表面反射属性：
     - 环境光反射量$\mathbf{k}_A=[\mathbf{k}_{AR}, \mathbf{k}_{AG}, \mathbf{k}_{AB}]$
     - 漫反射量$\mathbf{k}_D=[\mathbf{k}_{DR}, \mathbf{k}_{DG}, \mathbf{k}_{DB}]$
     - 镜面反射量$\mathbf{k}_S=[\mathbf{k}_{SR}, \mathbf{k}_{SG}, \mathbf{k}_{SB}]$
     - “光滑度”$\alpha$
   - 每个光源$i$的属性：
     - 光源颜色和强度$\mathbf{C}_i=[\mathbf{C}_{iR}, \mathbf{C}_{iG}, \mathbf{C}_{iB}]$
     - 反射点至光源的方向向量$\mathbf{L}_i$

   通过Phong模型，从表面某点反射出的光强度$\mathbf{I}$可以表示为：
   $$
   \mathbf{I}=\left(\mathbf{k}_{A} \otimes \mathbf{A}\right)+\sum_{i}\left[\mathbf{k}_{D}\left(\mathbf{N} \cdot \mathbf{L}_{i}\right)+\mathbf{k}_{S}\left(\mathbf{R}_{i} \cdot \mathbf{V}\right)^{\alpha}\right] \otimes \mathbf{C}_{i}
   $$
   $\mathbf{R}_i$表示光线方向$\mathbf{L}_i$对于表面法向量的反射方向。

   Blinn-Phong模型使用$\mathbf{N} \cdot \mathbf{H}_i$代替上式中的$\mathbf{R}_{i} \cdot \mathbf{V}$，其中，$\mathbf{H}_i=\frac{\mathbf{V}+\mathbf{L}_i}{2}$

# Vulkan Tutorial

## Image View and sampler

​	在创建交换链的过程中，我们已经知道只能通过`ImageView`访问image中的内容，所以我们需要为纹理图片创建对应的`ImageView`。纹理还需要采样器来访问，采样器对纹理进行过滤和变换操作。